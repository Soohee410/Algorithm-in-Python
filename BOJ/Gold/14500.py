import sys
input = sys.stdin.readline

def solution():
    n, m = map(int, input().split())
    arr = [list(map(int, input().split())) for _ in range(n)]
    kinds = [
        [(0,0), (0,1), (0,2), (0,3)],
        [(0,0), (1,0), (2,0), (3,0)],

        [(0,0), (0,1), (1,0), (1,1)],

        [(0,0), (1,0), (2,0), (2,1)],
        [(0,1), (1,1), (2,1), (2,0)],
        [(0,0), (0,1), (1,0), (2,0)],
        [(0,0), (0,1), (1,1), (2,1)],
        [(0,0), (1,0), (1,1), (1,2)],
        [(0,2), (1,0), (1,1), (1,2)],
        [(0,0), (1,0), (0,1), (0,2)],
        [(0,0), (0,1), (0,2), (1,2)],

        [(0,0), (1,0), (1,1), (2,1)],
        [(0,1), (1,1), (1,0), (2,0)],
        [(0,0), (0,1), (1,1), (1,2)],
        [(1,0), (1,1), (0,1), (0,2)],

        [(0,0), (0,1), (0,2), (1,1)],
        [(0,0), (1,0), (2,0), (1,1)],
        [(1,0), (1,1), (1,2), (0,1)],
        [(1,0), (0,1), (1,1), (2,1)]
    ]

    res = 0
    for tet in kinds:
        for x in range(n):
            for y in range(m):
                summ = 0
                for dx, dy in tet:
                    nx = x + dx
                    ny = y + dy
                    if nx > n-1 or ny > m-1 or nx < 0 or ny < 0:
                        continue
                    summ += arr[nx][ny]
                if summ > res:
                    res = summ
    return res

print(solution())   
